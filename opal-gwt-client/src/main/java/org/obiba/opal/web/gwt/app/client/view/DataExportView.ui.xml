<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder" 
  xmlns:g="urn:import:com.google.gwt.user.client.ui"
  xmlns:o="urn:import:org.obiba.opal.web.gwt.app.client.workbench.view" 
  ui:generateFormat='com.google.gwt.i18n.rebind.format.PropertiesFormat'
  ui:generateKeys="com.google.gwt.i18n.rebind.keygen.MD5KeyGenerator" 
  ui:generateLocales="default">

  <o:WorkbenchLayout>
    <g:Label><ui:msg description="Data export title">Export Data</ui:msg></g:Label>
    <g:Label ui:field="instructionsLabel" />
    <g:Button ui:field="submit"><ui:msg description="Export button label">Export</ui:msg></g:Button>
    
    <g:FlowPanel>
	 	<g:HTMLPanel ui:field="formStep">
	       <table class="gwt-KeyValue" cellspacing="10">
	         <tbody>
	         <tr>
	           <td style="vertical-align:top">
	             <ui:msg description="Tables field label">Tables:</ui:msg>                
	           </td>
	           <td>
	             <g:SimplePanel ui:field="tablesPanel" />
	           </td>
	         </tr>
	         <tr>
	           <td style="vertical-align:top">
	             <ui:msg description="Destination field label">Destination:</ui:msg>
	           </td>
	           <td>
	             <g:RadioButton name="destination" ui:field="destinationFile"><ui:msg description="File destination label">Copy data to file:</ui:msg></g:RadioButton>
	             <g:HTMLPanel addStyleNames="indent">
	               <table>
		             <tbody>
		               <tr>
		                 <td><g:Label><ui:msg description="File format field">Format:</ui:msg></g:Label></td>
		                 <td><g:ListBox ui:field="fileFormat">
		                   <g:item value="csv">CSV</g:item>
		                   <g:item value="excel">Excel (xls,xlsx)</g:item>
		                   <g:item value="xml">XML (zip)</g:item>
		                 </g:ListBox></td>
		               </tr>
		               <tr>
		                 <td><g:Label><ui:msg description="File field">File:</ui:msg></g:Label></td>
		                 <td><g:SimplePanel ui:field="filePanel"/></td>
		               </tr>
		             </tbody>
		           </table>
	             </g:HTMLPanel>   
	           </td>
	         </tr>
	         <tr>
	           <td/>
	           <td>
	             <g:RadioButton name="destination" ui:field="destinationDataSource"><ui:msg description="Datasource destination label">Copy data to dataset:</ui:msg></g:RadioButton>
	             <g:HTMLPanel addStyleNames="indent">
	               <g:ListBox ui:field="datasources" />
	             </g:HTMLPanel>
	           </td>
	         </tr> 
	         <tr>
	           <td>
	             <ui:msg description="Options field label">Options:</ui:msg>                
	           </td>
	           <td>
	             <g:CheckBox ui:field="incremental"><ui:msg description="Incremental checkbox label">incremental</ui:msg></g:CheckBox>
	           </td>
	         </tr>              
	         <tr>
	           <td/>
	           <td>
	             <g:CheckBox ui:field="withVariables"><ui:msg description="With variables checkbox label">with variables</ui:msg></g:CheckBox>
	           </td>
	         </tr>              
	         <tr>
	           <td/>
	           <td>
	             <g:CheckBox ui:field="useAlias"><ui:msg description="Use alias to rename variable checkbox label">use 'alias' attribute to rename variable</ui:msg></g:CheckBox>
	           </td>
	         </tr>              
	         <tr>
	           <td>
	             <ui:msg description="Participant identifier field label">Participant Identifier:</ui:msg>
	           </td>
	           <td>
	             <g:RadioButton name="idGroup" ui:field="opalId"><ui:msg description="Use opal id radio button label">use Opal ID</ui:msg></g:RadioButton>
	           </td>
	         </tr> 
	         <tr>
	           <td/>
	           <td>
	             <g:RadioButton name="idGroup" ui:field="unitId"><ui:msg description="Unit id dropdown label">use Unit ID:</ui:msg></g:RadioButton> <g:ListBox ui:field="units" />
	           </td>
	         </tr> 
	         </tbody>
	       </table>
	     </g:HTMLPanel>
	     <g:FlowPanel ui:field="conclusionStep">
	       <g:Label addStyleNames="title p"><ui:msg description="Data export job">The data exportation process can be followed using the Job ID:</ui:msg></g:Label>
	       <g:Anchor ui:field="jobLink" addStyleNames="large-indent">Job ID</g:Anchor>
	       <g:Label addStyleNames="p"><ui:msg description="Data export new">You may now export more data:</ui:msg></g:Label>
	       <g:Button ui:field="returnButton" addStyleNames="large-indent"><ui:msg description="Return Data Export button">Return to Data Export</ui:msg></g:Button>
	     </g:FlowPanel>
    </g:FlowPanel>
     
     <g:HTMLPanel>
       <g:Label addStyleNames="title"><ui:msg description="File destination label">File Destination</ui:msg></g:Label> 
       <p>The data can be exported in file. The file will be outputed on the server side in a directory you will have selected. Once successfully exported, you will download the resulting output from the [Opal file system]. Depending on the file format selected, some limits applies:</p>
       <ul>
         <li>CSV
           <br/>
           Zip is not supported yet.
         </li>
         <li>Excel
           <br/>
             Use respectively .xls/.xlsx file suffix to distinguish Excel formats 97/2007.
           <ul>
             <li>Maximum length of table name: 30</li>
             <li>Maximum number of variables: 256/16K</li>
             <li>Maximum number of participants: 16K/1M</li>
             <li>Binary data are not suported</li>    
           </ul>
         </li>
         <li>XML
           <br/>
           Resulting file will be zipped.
         </li>  
       </ul>
       <g:Label addStyleNames="title"><ui:msg description="Participant Identifier label">Participant Identifier</ui:msg></g:Label>
       <p>Different strategies can be applied with the exported participant identifiers:</p>
       <ul>
         <li>Use Opal participant identifier.</li>
         <li>Switch the participant identifier to one that is specific to destination unit. To achieve that, select a 'unit' that has been predefined in your Opal system.</li>
       </ul>
     </g:HTMLPanel>
  </o:WorkbenchLayout>
    
</ui:UiBinder>
