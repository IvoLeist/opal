#!/bin/sh

echo "JAVA_HOME=$JAVA_HOME"
echo "OPAL_HOME=$OPAL_HOME"

if [ -z "$JAVA_HOME" ]
then
  echo "JAVA_HOME not set."
  exit 1;
fi

if [ -z "$OPAL_HOME" ]
then
  echo "OPAL_HOME not set."
  exit 2;
fi

# Are we under cygwin environment ?
WINDOWS=`echo $OS | grep -ci windows`

CLASSPATH=$OPAL_HOME/conf
for f in $(ls "$OPAL_HOME/lib" | grep jar$); do
  if [ x"$WINDOWS" = x0 ]
  then
    CLASSPATH=$CLASSPATH:$OPAL_HOME/lib/$f
  else
    CLASSPATH=$CLASSPATH\;$OPAL_HOME/lib/$f
  fi
done


java -cp "$CLASSPATH" org.obiba.opal.cli.client.OpalConsole $@