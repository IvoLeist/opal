<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:tx="http://www.springframework.org/schema/tx"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd 
  http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd">

  <bean id="opalRepositoryManager" class="org.obiba.opal.sesame.repository.impl.OpalRepositoryManagerImpl"
    scope="singleton" init-method="initialize" destroy-method="shutdown">
    <property name="repositories">
      <map>
        <entry key="catalogue">
          <bean class="org.obiba.opal.sesame.repository.impl.MemoryRepositoryFactory" />
        </entry>
        <entry key="data">
          <ref bean="memoryRepositoryFactory" />
          <!--           <bean class="org.obiba.opal.sesame.repository.spring.SpringTransactionalRepository">
            <constructor-arg ref="rdbmsRepository" />
            </bean>
          -->
        </entry>
      </map>
    </property>
  </bean>

  <bean id="memoryRepositoryFactory" class="org.obiba.opal.sesame.repository.impl.MemoryRepositoryFactory"
    lazy-init="true">
    <property name="dataDir" value="opal-data" />
  </bean>

  <bean id="nativeRepositoryFactory" class="org.obiba.opal.sesame.repository.impl.NativeRepositoryFactory"
    lazy-init="true">
    <property name="dataDir" value="" />
    <property name="tripleIndexes" value="spoc,posc,cosp" />
    <property name="withInferencer" value="false" />
  </bean>

  <bean id="rdbmsRepository" class="org.obiba.opal.sesame.repository.impl.MySqlRepositoryFactory" lazy-init="true">
    <property name="databaseName" value="opal" />
    <property name="serverName" value="localhost" />
    <property name="user" value="opal" />
    <property name="password" value="opal" />
  </bean>

  <!-- 
    <bean id="rdbmsRepository" class="org.obiba.opal.sesame.repository.SailRepositoryFactoryBean" lazy-init="true">
    <property name="sail" ref="dataStore" />
    </bean>
    
    
    <bean id="dataStore" class="org.obiba.opal.sesame.repository.rdbms.DatasourceStore" lazy-init="true">
    <property name="dataSource">
    <bean class="org.enhydra.jdbc.pool.StandardXAPoolDataSource" destroy-method="shutdown">
    <property name="dataSource">
    <bean class="org.enhydra.jdbc.standard.StandardXADataSource" destroy-method="shutdown">
    
    <property name="driverName" value="${org.obiba.opal.datasource.opal.driver}" />
    <property name="url" value="${org.obiba.opal.datasource.opal.url}" />
    
    <property name="transactionManager" ref="jotm" />
    </bean>
    </property>
    
    <property name="user" value="${org.obiba.opal.datasource.opal.username}" />
    <property name="password" value="${org.obiba.opal.datasource.opal.password}" />
    
    <property name="maxSize" value="10" />
    <property name="minSize" value="3" />
    
    </bean>
    </property>
    <property name="indexed" value="false" />
    <property name="maxNumberOfTripleTables" value="0" />
    </bean>
  -->
</beans>